---
name: Satellite Publish
hosts: all
become: false
gather_facts: false
vars:
    sat_url: "{{ lookup('credential', 'Satellite', 'Satellite 6 URL') }}"
    sat_user: "{{ lookup('credential', 'Satellite', 'Username') }}"
    sat_password: "{{ lookup('credential', 'Satellite', 'Password') }}"

tasks:
  - name: "Publish a content view, not idempotent"
    redhat.satellite.content_view_version:
    username: "{{ sat_user }}"
    password: "{{ sat_password }}"
    server_url: "{{ sat_url }}"
    content_view: "{{ c_view ))"
    organization: 'Demo Lab'
